wpa._dialpad=function(){function e(e){try{common.PutToDebugLog(4,"EVENT, _dialpad: onCreate"),j$("#nav_dp_contacts").on("click",function(){j$.mobile.changePage("#page_contactslist",{transition:"none",role:"page"})}),j$("#nav_dp_callhistory").on("click",function(){j$.mobile.changePage("#page_callhistorylist",{transition:"none",role:"page"})}),j$("#nav_dp_dialpad").attr("title",stringres.get("hint_dialpad")),j$("#nav_dp_contacts").attr("title",stringres.get("hint_contacts")),j$("#nav_dp_callhistory").attr("title",stringres.get("hint_callhistory")),j$("#status_dialpad").attr("title",stringres.get("hint_status")),j$("#curr_user_dialpad").attr("title",stringres.get("hint_curr_user")),j$(".img_encrypt").attr("title",stringres.get("hint_encicon")),j$("#dialpad_not_btn").on("click",function(){common.SaveParameter("notification_count2",0),common.ShowNotifications2()}),j$("#phone_number").attr("title",stringres.get("hint_phone_number")),j$("#phone_number").on("input",function(){a()}),j$("#btn_showhide_numpad").on("click",function(){try{S?R():("none"===j$("#dialpad_btn_grid").css("display")?j$("#dialpad_btn_grid").show():j$("#dialpad_btn_grid").hide(),v())}catch(e){common.PutToDebugLogException(2,"_dialpad: btn_showhide_numpad on click",e)}}),j$("#btn_showhide_numpad").attr("title",stringres.get("hint_numpad")),j$("#dialpad_list").on("click",".ch_anchor",function(e){_(j$(this).attr("id"))}),j$("#dialpad_list").on("taphold",".ch_anchor",function(e){var o=j$(this).attr("id");common.isNull(o)||(o=o.replace("recentitem_","recentmenu_"),_(o,!0))}),j$("#dialpad_list").on("click",".ch_menu",function(e){_(j$(this).attr("id"))}),j$("#btn_voicemail").on("click",function(){try{if(2!==common.GetParameterInt("voicemail",2))c();else{var e=common.GetParameter("voicemailnum");!common.isNull(e)&&e.length>0?l(e):common.SetVoiceMailNumber(function(e){!common.isNull(e)&&e.length>0&&l(e)})}}catch(o){common.PutToDebugLogException(2,"_dialpad: btn_voicemail on click",o)}}),j$("#btn_voicemail").attr("title",stringres.get("hint_voicemail"));var m=!1;j$("#btn_call").on("click",function(){if(common.PutToDebugLog(4,"EVENT, dialpad call button clicked"),!m&&(m=!0,setTimeout(function(){m=!1},1e3),"true"!==common.GetParameter("serverinputisupperserver")||!(common.isNull(common.GetSipusername())||common.GetSipusername().length<=0||common.isNull(common.GetParameter("password"))||common.GetParameter("password").length<=0))){var e=document.getElementById("phone_number");if(!common.isNull(e)){var o=e.value,t=common.GetParameter("redial");if(common.isNull(o)||o.length<1){if(common.isNull(t)||!(t.length>0))return void common.PutToDebugLog(1,stringres.get("err_msg_3"));e.value=t}else o=common.Trim(o),l(o),common.SaveParameter("redial",o),j$("#disprate_container").html("&nbsp;")}}}),j$("#btn_call").attr("title",stringres.get("hint_btn_call")),j$("#page_dialpad").keypress(function(e){i(e)}),j$("#page_dialpad").keydown(function(e){try{var o=e.keyCode?e.keyCode:e.which;if(o==q)return V=!0,!0;if(o==Y)return W=!0,!0;if(o==K)return F=!0,!0;if(e.ctrlKey||e.metaKey||e.altKey)return z=!0,!0;if(8===o)!1===j$("#phone_number").is(":focus")&&n();else if(27===o)j$("#phone_number").val("");else if(13===o){if(j$(".ui-page-active .ui-popup-active").length>0){var t=j$.mobile.activePage.find(".messagePopup");return common.isNull(t)||"adialog_videocall"!==t.attr("id")&&"adialog_screensharecall"!==t.attr("id")||j$("#adialog_positive").click(),!1}j$("#btn_call").click()}}catch(a){common.PutToDebugLogException(2,"_dialpad: keydown",a)}}),j$("#btn_message").on("click",function(){j()}),j$("#btn_message").attr("title",stringres.get("hint_message")),j$("#dialpad_notification_list").on("click",".nt_anchor",function(e){j$("#dialpad_not").panel("close"),common.NotificationOnClick2(j$(this).attr("id"),!1)}),j$("#dialpad_notification_list").on("click",".nt_menu",function(e){j$("#dialpad_not").panel("close"),common.NotificationOnClick2(j$(this).attr("id"),!0)}),j$(window).resize(function(){"page_dialpad"===j$.mobile.activePage.attr("id")&&v()}),j$("#dialpad_menu_ul").on("click","li",function(e){T(j$(this).attr("id"))}),j$("#btn_dialpad_menu").on("click",function(){N("#dialpad_menu_ul")}),j$("#btn_dialpad_menu").attr("title",stringres.get("hint_menu")),setTimeout(function(){var e=!1;!0!==common.GetParameterBool("customizedversion",!0)&&"true"===common.GetParameter("displaypopupdirectcalls")&&(common.isNull(common.GetSipusername())||common.GetSipusername().length<=0||common.isNull(common.GetParameter("password"))||common.GetParameter("password").length<=0)&&(e=!0),e&&(common.SaveParameter("displaypopupdirectcalls","false"),common.ShowToast(stringres.get("warning_msg_1"),6e3))},3e3),j$("#btn_dp_1").on("tap",function(){o("1")}),j$("#btn_dp_2").on("tap",function(){o("2")}),j$("#btn_dp_3").on("tap",function(){o("3")}),j$("#btn_dp_4").on("tap",function(){o("4")}),j$("#btn_dp_5").on("tap",function(){o("5")}),j$("#btn_dp_6").on("tap",function(){o("6")}),j$("#btn_dp_7").on("tap",function(){o("7")}),j$("#btn_dp_8").on("tap",function(){o("8")}),j$("#btn_dp_9").on("tap",function(){o("9")}),j$("#btn_dp_0").on("tap",function(e){o("0")}),j$("#btn_dp_ast").on("tap",function(){o("*")}),j$("#btn_dp_diez").on("tap",function(){o("#")}),j$("#btn_dp_0").on("taphold",function(e){t(["+"])}),j$("#btn_backspace").on("click",function(){n()}),j$("#btn_backspace").on("taphold",function(){common.isNull(document.getElementById("phone_number"))||(document.getElementById("phone_number").value=""),a()});var r=common.GetColortheme();11!==r&&22!==r&&23!==r||j$("#btn_backspace_img").attr("src",common.GetElementSource()+"images/btn_backspace_txt_grey.png"),22===r&&(j$("#btn_message_img").attr("src",common.GetElementSource()+"images/icon_message_grey.png"),j$("#dp_btn_call_txt").attr("src",common.GetElementSource()+"images/btn_call_txt_green.png")),setTimeout(function(){common.GetContacts(function(e){e||common.PutToDebugLog(2,"EVENT, _dialpad: LoadContacts failed onCreate")})},500),setTimeout(function(){common.ReadCallhistoryFile(function(e){e||common.PutToDebugLog(2,"EVENT, _dialpad: load call history failed onCreate")})},1e3);var d=common.GetParameter("advertisement");!common.isNull(d)&&d.length>5&&(j$("#advert_dialpad_frame").attr("src",d),j$("#advert_dialpad").show()),!0===common.UsePresence2()&&(j$("#dialpad_additional_header_left").on("click",function(){common.PresenceSelector("dialpad")}),j$("#dialpad_additional_header_left").css("cursor","pointer"));var s=common.GetConfig("showratewhiletype");(common.isNull(s)||s.length<1||!common.IsNumber(s))&&(s=common.GetParameter2("showratewhiletype")),(common.isNull(s)||s.length<1||!common.IsNumber(s))&&(s="0"),global.showratewhiletype_cache=common.StrToInt(s),global.showratewhiletype_cache>0&&!common.isNull(document.getElementById("disprate_container"))&&common.GetParameter("ratingrequest").length>0&&(document.getElementById("disprate_container").style.display="block"),j$("#btn_dialpad_engine_close").on("click",function(e){common.SaveParameter("ignoreengineselect","true"),j$("#settings_engine").hide(),j$("#dialpad_engine").hide(),v()}),j$("#btn_dialpad_engine").on("click",function(e){if(common.SaveParameter("ignoreengineselect","true"),j$("#settings_engine").hide(),j$("#dialpad_engine").hide(),!(common.isNull(M)||M.length<1)){if(v(),"java"===M);else if("webrtc"===M)common.EngineSelect(1);else if("ns"===M){setTimeout(function(){common.NPDownloadAndInstall()},400);var o=common.GetNPLocation();!isNull(o)&&o.length>0&&window.open(o)}var t=common.GetEngine(M);common.isNull(t)||(t.clicked=2,common.SetEngine(M,t),common.OpenSettings(!0,12),setTimeout(function(){common.ShowToast(common.GetEngineDisplayName(M)+" "+stringres.get("ce_use"),function(){common.ChooseEngineLogic2(M),M=""})},400))}})}catch(u){common.PutToDebugLogException(2,"_dialpad: onCreate",u)}}function o(e){try{var o=document.getElementById("phone_number"),t=common.GetTickCount();if(t>0&&t-O<100)return;if(O=t,j$("#phone_number").is(":focus"))return;if(common.isNull(o))return;common.isNull(o.value)&&(o.value=""),o.value=o.value+e;var n=o.value;common.isNull(n)&&(n=""),n=common.ReplaceAll(n,"+",""),n=common.ReplaceAll(n,"*",""),n=common.ReplaceAll(n,"#",""),!common.isNull(e)&&common.IsNumber(e)&&common.IsNumber(n)&&common.PlayDtmfSound(e),H=!1,a()}catch(i){common.PutToDebugLogException(2,"_dialpad: PutNumber",i)}}function t(e){try{var o=document.getElementById("phone_number");if(common.isNull(o))return;if(common.isNull(o.value)&&(o.value=""),common.isNull(e)||e.length<1)return;if(1===e.length)return void(o.value=o.value+e[0]);H=!1,a()}catch(t){common.PutToDebugLogException(2,"_dialpad: PutCharLongpress",t)}}function a(){try{var e=document.getElementById("phone_number"),o="";if(common.isNull(e)||common.isNull(e.value))return;o=e.value,o.length>0?(j$("#btn_backspace").show(),j$("#phone_number_container .ui-input-text").css("text-align","center"),j$("#phone_number_container .ui-input-text:focus").css("text-align","center")):(j$("#btn_backspace").hide(),j$("#phone_number_container .ui-input-text").css("text-align","left"),j$("#phone_number_container .ui-input-text:focus").css("text-align","left"),H=!0),o=common.Trim(o);var t=!1;if(j$("#dialpad_btn_grid").is(":visible")&&(t=!0),H&&o.length>0&&!common.isNull(global.ctlist)&&global.ctlist.length>0?p(o):u(),t&&(j$("#dialpad_btn_grid").show(),v()),global.showratewhiletype_cache>0&&common.GetParameter("ratingrequest").length>0){if(U<0){var a=common.GetParameter2("showratewhiletype_minlenth");U=!common.isNull(a)&&common.IsNumber(a)?common.StrToInt(a):3;var n=common.GetParameter2("showratewhiletype_maxlenth");A=!common.isNull(n)&&common.IsNumber(n)?common.StrToInt(n):6}o.length>=U&&o.length<=A?common.UriParser(common.GetParameter("ratingrequest"),"",o,"","","getrating"):j$("#disprate_container").html("&nbsp;")}}catch(i){common.PutToDebugLogException(2,"_dialpad: PhoneInputOnChange",i)}}function n(){try{var e=document.getElementById("phone_number");if(common.isNull(e)||common.isNull(e.value)||e.value.length<1)return;e.value=e.value.substring(0,e.value.length-1),a()}catch(o){common.PutToDebugLogException(2,"_dialpad: BackSpaceClick",o)}}function i(e){try{if(j$(".ui-page-active .ui-popup-active").length>0)return!1;var t=e.keyCode?e.keyCode:e.which;return!(V||W||F||z||8===t)&&(o(String.fromCharCode(t)),!1)}catch(a){common.PutToDebugLogException(2,"_dialpad: HandleKeyPress",a)}}function l(e,o){try{if(common.isNull(e)||e.length<1)return void common.PutToDebugLog(2,"EVENT, _dialpad: StartCall number is NULL");e=common.NormalizeNumber(e),!0===o?(common.PutToDebugLog(4,"EVENT, _dialpad initiate video call to: "+e),webphone_api.videocall(e)):(common.PutToDebugLog(4,"EVENT, _dialpad initiate call to: "+e),webphone_api.call(e,-1))}catch(t){common.PutToDebugLogException(2,"_dialpad: StartCall",t)}}function c(){try{var e=common.GetDeviceWidth();e=!common.isNull(e)&&common.IsNumber(e)&&e>100?Math.floor(e/1.2):220;var o='<div id="quickcall_popup" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+e+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("quickcall_title")+'</h1></div><div role="main" class="ui-content adialog_content"><span>'+stringres.get("quickcall_msg")+'</span><input type="text" id="quickcall_input" name="setting_item" data-theme="a" autocapitalize="off"/></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_quickcall")+'</a><a href="javascript:;" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+stringres.get("btn_cancel")+"</a></div></div>";j$.mobile.activePage.append(o).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#adialog_positive").off("click"),j$("#adialog_negative").off("click")}});var t=document.getElementById("quickcall_input");common.isNull(t)||t.focus(),j$("#adialog_positive").on("click",function(e){j$("#quickcall_popup").on("popupafterclose",function(e){common.PutToDebugLog(5,"EVENT, _dialpad SetVoiceMailNumber OK click");var o="";common.isNull(t)||(o=t.value),!common.isNull(o)&&o.length>0&&(o=common.Trim(o),o.length>0&&l(o))})}),j$("#adialog_negative").on("click",function(e){})}catch(a){common.PutToDebugLogException(2,"_dialpad: QuickCall",a)}}function m(e){try{if(common.PutToDebugLog(4,"EVENT, _dialpad: onStart"),common.HideSettings("page_contacts","","page_contacts",!0)){j$("#li_nav_dp_ct").remove();var o=j$("#ul_nav_dp").children().length,t=Math.floor(100/o);j$("#ul_nav_dp").children("li").each(function(){j$(this).css("width",t+"%")}),o<2&&(j$("#ul_nav_dp").remove(),v())}if(common.HideSettings("page_history","","page_history",!0)){j$("#li_nav_dp_ch").remove();var o=j$("#ul_nav_dp").children().length,t=Math.floor(100/o);j$("#ul_nav_dp").children("li").each(function(){j$(this).css("width",t+"%")}),o<2&&(j$("#ul_nav_dp").remove(),v())}if(!0===global.pagewasrefreshed)return common.PutToDebugLog(4,"EVENT, _dialpad: onStart page refresh detected, go back to settings page"),void common.OpenSettings(!1,13);common.isNull(document.getElementById("status_dialpad"))||!1!==global.dploadingdisplayed||(global.dploadingdisplayed=!0,document.getElementById("status_dialpad").innerHTML=stringres.get("loading"),common.PutToDebugLogSpecial(1,"EVENT, _dialpad: onStart display Loading...",!1,"")),global.isDialpadStarted=!0,common.HideModalLoader(),j$("#phone_number").attr("placeholder",stringres.get("phone_nr")),50===common.GetConfigInt("brandid",-1)?j$("#phone_number").attr("placeholder",stringres.get("phone_nr2")):60===common.GetConfigInt("brandid",-1)&&(j$("#phone_number").attr("placeholder","Enter # or Contact Name"),j$("#phone_number_container .ui-input-text").css("font-size","1.2em"),j$("#phone_number_container .ui-input-text:focus").css("font-size","1.2em")),j$("#btn_backspace").hide(),j$("#disprate_container").html("&nbsp;"),22===common.GetColortheme()&&(j$("#nav_dp_dialpad IMG").attr("src","images/tab_dialpad_blue.png"),j$("#nav_dp_contacts IMG").attr("src","images/tab_contacts_grey.png"),j$("#nav_dp_callhistory IMG").attr("src","images/tab_callog_grey.png")),common.isNull(document.getElementById("app_name_dialpad"))||common.GetParameter("devicetype")===common.DEVICE_WIN_SOFTPHONE()||(document.getElementById("app_name_dialpad").innerHTML=common.GetBrandName()),common.isNull(document.getElementById("dialpad_title"))||(document.getElementById("dialpad_title").innerHTML=stringres.get("dialpad_title")),j$("#dialpad_title").attr("title",stringres.get("hint_page"));var a=common.GetCallerid();!common.isNull(a)&&a.length>0&&j$("#curr_user_dialpad").html(a);var n=common.GetDeviceWidth()-j$("#curr_user_dialpad").width()-25;if(!common.isNull(n)&&common.IsNumber(n)&&j$("#status_dialpad").width(n),2!==common.GetParameterInt("voicemail",2)?(j$("#btn_voicemail_img").attr("src",common.GetElementSource()+"images/btn_call_quick_txt.png"),j$("#btn_voicemail").attr("title",stringres.get("hint_quickcall"))):(j$("#btn_voicemail_img").attr("src",common.GetElementSource()+"images/btn_voicemail_txt.png"),j$("#btn_voicemail").attr("title",stringres.get("hint_voicemail"))),common.GetParameter("header").length>2?(j$("#headertext_settings").show(),j$("#headertext_settings").html(common.GetParameter("header"))):j$("#headertext_settings").hide(),common.GetParameter("footer").length>2?(j$("#footertext_dialpad").show(),j$("#footertext_dialpad").html(common.GetParameter("footer"))):j$("#footertext_dialpad").hide(),50===common.GetConfigInt("brandid",-1)&&j$("#btn_message_img").attr("src",common.GetElementSource()+"images/icon_recharge_dollar.png"),setTimeout(function(){common.CanShowLicKeyInput()},3500),common.CheckInternetConnection(),common.ShowNotifications2(),r(),!0!==common.HideSettings("chat",stringres.get("sett_display_name_chat"),"chat",!0)&&3!=common.GetParameterInt("chatsms",0)||60===common.GetConfigInt("brandid",-1)||j$("#btn_message button").hide(),!0===common.HideSettings("voicemail",stringres.get("sett_display_name_voicemail"),"voicemail",!0)&&(!0===S?j$("#btn_showhide_numpad button").hide():j$("#btn_showhide_numpad button").show()),58===common.GetConfigInt("brandid",-1)){var i=document.getElementById("app_name_dialpad");if(!common.isNull(i)){var l=document.getElementById("dialpad_title");i.style.display="inline",common.isNull(l)||(l.style.display="none"),document.getElementById("dialpad_additional_header_left").style.width="65%",i.innerHTML='<img src="'+common.GetElementSource()+'images/logo.png" style="border: 0;">&nbsp;&nbsp;&nbsp;<div class="adhead_custom_brand" style=""><b>eNikMa</b> Unified Comm</div>'}}var c=common.GetParameter("menu_url");(!common.isNull(c)||c.length>3)&&(S=!1,22===common.GetColortheme()?j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_numpad_txt_grey.png"):j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_numpad_txt.png"),j$("#btn_showhide_numpad").attr("title",stringres.get("hint_numpad"))),v(),setTimeout(function(){common.StartPresence2()},2500),common.IsIeVersion(10)&&j$("#dialpad_list").children().css("line-height","normal"),common.IsIeVersion(10)&&j$("#dialpad_notification_list").children().css("line-height","normal"),j$("#dialpad_notification_list").height(common.GetDeviceHeight()-55),common.ShowOfferSaveContact();var m=document.getElementById("phone_number");common.isNull(m)||"Android"===common.GetOs()||"iOS"===common.GetOs()||m.focus()}catch(d){common.PutToDebugLogException(2,"_dialpad: onStart",d)}}function r(){try{(common.isNull(global.chlist)||global.chlist.length<1)&&global.readcallhistoryforrecents&&(common.ReadCallhistoryFile(function(e){e||common.PutToDebugLog(2,"EVENT, _dialpad: load call history failed (2) GetCallhistory"),u()}),setTimeout(function(){common.GetContacts(function(e){e||common.PutToDebugLog(2,"EVENT, _dialpad: LoadContacts failed GetCallhistory")})},1e3))}catch(e){common.PutToDebugLogException(2,"_dialpad: GetCallhistory",e)}u()}function d(){var e=!1,o=[];try{if(common.isNull(global.chlist)||global.chlist.length<1||!1===global.refreshrecents&&global.recentlist.length>0)return;!0===common.UsePresence2()&&(e=!0);var t=[],a=[];if(t=global.chlist.length>500?global.chlist.slice(0,499):global.chlist,common.isNull(t)||t.length<1)return void common.PutToDebugLog(2,"ERROR, _dialpad: GetRecents list is NULL");for(var n=common.GetTickCount(),i=0;i<t.length;i++)if(!common.isNull(t[i])){var l=t[i];if(!(common.isNull(l[common.CH_NUMBER])||l[common.CH_NUMBER].length<1)&&!0!==common.IsContactBlocked(l[common.CH_NUMBER],null)){var c=0,m=0;try{m=common.StrToInt(common.Trim(l[common.CH_DATE]))}catch(N){common.PutToDebugLogException(2,"_dialpad: GetRecents convert duration",N)}var r=n-m;if(r>0&&(0===a.length?c+=Q:r<36e5?c+=Z:r<18e6?c+=ee:r<864e5?c+=oe:r<6048e5?c+=te:r<2592e6?c+=ae:r<31104e6&&(c+=ne)),e){var d="-1",u=global.presenceHM[l[common.CH_NUMBER]];common.isNull(u)||(d=u[common.PRES_STATUS]),common.isNull(d)||("5"===d?c+=X:c=("0"===d||"1"===d||"4"===d)&&c>10?Math.floor(c/2):Math.floor(c/1.5)),(common.isNull(d)||d.length<1||"-1"===d)&&(common.isNull(o)&&(o=[]),o.indexOf(l[common.CH_NUMBER])<0&&o.push(l[common.CH_NUMBER]))}var p=common.GetContactIdFromNumber(l[common.CH_NUMBER]);if(p>=0){var g=global.ctlist[p];common.isNull(g)||(g.length>common.CT_FAV&&"1"===g[common.CT_FAV]&&(c*=1.15),g.length>common.CT_ISFROMSYNC&&"0"===g[common.CT_ISFROMSYNC]&&(c*=1.1))}"1"!==l[common.CH_TYPE]&&(c+=ie);for(var _=-1,h=0;h<a.length;h++)if(a[h][common.RC_NUMBER]===l[common.CH_NUMBER]){_=h;break}common.IsContactBlocked(l[common.CH_NUMBER])&&c>5&&(c=Math.floor(c/ce));var b=common.GetContactIdFromNumber(l[common.CH_NUMBER]);if(!common.isNull(b)&&common.IsNumber(b)&&!0===common.ContactIsFavorite(b)&&(c*=le),_>=0){var f=0;try{var v=a[_][common.RC_RANK];f="number"!=typeof v?common.StrToInt(common.Trim(a[_][common.RC_RANK])):v}catch(T){common.PutToDebugLogException(2,"_dialpad: GetRecents convert points",T)}f+=c,a[_][common.RC_RANK]=f}else{var E=[];E[common.RC_TYPE]=l[common.CH_TYPE],E[common.RC_NAME]=l[common.CH_NAME],E[common.RC_NUMBER]=l[common.CH_NUMBER],E[common.RC_DATE]=l[common.CH_DATE],E[common.RC_RANK]=c,E[common.RC_DURATION]=l[common.CH_DURATION],a.push(E)}}}if(global.recentlist=a,global.refreshrecents=!1,s(),e&&!common.isNull(o)&&o.length>0){for(var j="",i=0;i<o.length;i++)common.isNull(o[i])||common.Trim(o[i]).length<1||(j.length>0&&(j+=","),j+=o[i]);!common.isNull(j)&&j.length>0&&(j=common.ReplaceAll(j,"-",""),j=common.ReplaceAll(j,")",""),j=common.ReplaceAll(j,"(",""),common.PresenceGet2(j))}}catch(P){common.PutToDebugLogException(2,"_dialpad: GetRecents",P)}}function s(){try{global.recentlist.sort(function(e,o){var t=e[common.RC_RANK],a=o[common.RC_RANK];return t<a?1:t>a?-1:0})}catch(e){PutToDebugLogException(2,"_dialpad: SortRecents",e)}}function u(){var e=global.nrofrecentstodisplay,o=!1;try{if(common.isNull(document.getElementById("dialpad_list")))return void common.PutToDebugLog(2,"ERROR, _dialpad: PopulateListRecents listelement is null");if(d(),common.isNull(global.recentlist)||global.recentlist.length<1||!0===common.HideSettings("recents","","recents",!0)){j$("#dialpad_btn_grid").show(),j$("#dialpad_list").html(""),v(),common.PutToDebugLog(2,"EVENT, _dialpad: PopulateListRecents no recents");var t=common.GetParameter("menu_url");return!common.isNull(t)||t.length>3?(S=!1,22===common.GetColortheme()?j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_numpad_txt_grey.png"):j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_numpad_txt.png"),void j$("#btn_showhide_numpad").attr("title",stringres.get("hint_numpad"))):void(60!==common.GetConfigInt("brandid",-1)&&(S=!0,22===common.GetColortheme()?j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_voicemail_txt_big_grey.png"):j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_voicemail_txt_big.png"),j$("#btn_showhide_numpad").attr("title",stringres.get("hint_voicemail"))))}S=!1,22===common.GetColortheme()?j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_numpad_txt_grey.png"):j$("#btn_showhide_numpad_img").attr("src",common.GetElementSource()+"images/btn_numpad_txt.png"),j$("#btn_showhide_numpad").attr("title",stringres.get("hint_numpad")),B=!1,global.recentlist.length<e&&(e=global.recentlist.length);for(var a=0;a<e;a++)if(global.recentlist[a][common.RC_NAME]===global.recentlist[a][common.RC_NUMBER])global.recentlist[a][common.RC_NAME]=common.GetContactNameFromNumber(global.recentlist[a][common.RC_NUMBER]);else{var n=common.GetContactIdFromNumber(global.recentlist[a][common.RC_NUMBER]);n<0||(global.recentlist[a][common.RC_NAME]=common.GetContactNameFromNumber(global.recentlist[a][common.RC_NUMBER]))}common.PutToDebugLog(2,"EVENT, _dialpad Starting populate recents list");var i='<a id="recentmenu_[RCID]" class="ch_menu mlistitem">'+stringres.get("hint_recents")+"</a>";!0!==common.HideSettings("disablecontactmenu","","disablecontactmenu",!1)&&!0!==common.HideSettings("page_contacts","","page_contacts",!0)||(i="");var l='<li data-theme="b"><a id="recentitem_[RCID]" class="ch_anchor mlistitem"><div class="item_container"><div class="ch_type"><img src="'+common.GetElementSource()+'images/[ICON_CALLTYPE].png" /></div><div class="ch_numberonly">[NUMBERONLY]</div><div class="ch_data"><div class="ch_name">[NAME]</div><div class="ch_number">[NUMBER]</div></div><div class="ch_presence">[PRESENCE]</div><div class="ch_date">[DATE]</div></div></a>'+i+"</li>",c="";!0===common.UsePresence2()&&(o=!0);for(var a=0;a<e;a++){var m=global.recentlist[a];if(!(common.isNull(m)||m.length<1)){var r="icon_call_missed",s=0;try{s=common.StrToInt(common.Trim(m[common.RC_DURATION]))}catch(I){common.PutToDebugLogException(2,"_dialpad: PopulateListRecents convert duration",I)}"0"===m[common.RC_TYPE]&&(r=s<=0?"icon_call_missed":"icon_call_outgoing"),"1"===m[common.RC_TYPE]&&(r="icon_call_incoming");var u=0;try{u=common.StrToInt(common.Trim(m[common.RC_DATE]))}catch(I){common.PutToDebugLogException(2,"_dialpad: PopulateListRecents convert date of call",I)}var p=new Date(u),g=p.getMinutes();g<10&&(g="0"+g);var _=p.getDate();_<10&&(_="0"+_);var h=J[p.getMonth()]+", "+_+"&nbsp;&nbsp;"+p.getFullYear()+"&nbsp;&nbsp;"+p.getHours()+":"+g,b=l.replace("[RCID]",a);b=b.replace("[RCID]",a),b=b.replace("[ICON_CALLTYPE]",r),m[common.RC_NAME]===m[common.RC_NUMBER]?(b=b.replace("[NUMBERONLY]",m[common.RC_NUMBER]),b=b.replace("[NAME]",""),b=b.replace("[NUMBER]","")):(b=b.replace("[NUMBERONLY]",""),b=b.replace("[NAME]",m[common.RC_NAME]),b=b.replace("[NUMBER]",m[common.RC_NUMBER])),b=b.replace("[DATE]",h);var f="";if(o){var E=m[common.RC_NUMBER],j="-1",N=global.presenceHM[E];common.isNull(N)||(j=N[common.PRES_STATUS]),f=common.isNull(j)||j.length<1?"":"0"===j?'<img src="'+common.GetElementSource()+'images/presence_grey.png" />':"1"===j?'<img src="'+common.GetElementSource()+'images/presence_white.png" />':"2"===j?'<img src="'+common.GetElementSource()+'images/presence_yellow.png" />':"3"===j?'<img src="'+common.GetElementSource()+'images/presence_orange.png" />':"4"===j?'<img src="'+common.GetElementSource()+'images/presence_red.png" />':"5"===j?'<img src="'+common.GetElementSource()+'images/presence_green.png" />':""}b=b.replace("[PRESENCE]",f),c+=b}}if(j$("#dialpad_list").html(""),j$("#dialpad_list").append(c).listview("refresh"),common.isNull(global.recentlist)||global.recentlist.length<1);else{var T=j$("#dialpad_list li").height();if(!common.isNull(T)&&common.IsNumber(T)&&j$("#dialpad_btn_grid").is(":visible")){j$("#dialpad_btn_grid .ui-btn").height("auto");var P=global.nrofrecentstodisplay;P>global.recentlist.length&&(P=global.recentlist.length);var $=P*T,k=common.GetDeviceHeight()-j$("#dialpad_header").height()-j$("#phone_number_container").height()-j$("#dialpad_footer").height()-common.StrToIntPx(j$("#dialpad_header").css("border-top-width"))-common.StrToIntPx(j$("#dialpad_header").css("border-bottom-width"));j$(".separator_color_bg").height(),k-=j$("#dialpad_btn_grid").height(),k<$&&j$("#dialpad_btn_grid").hide()}v()}}catch(C){common.PutToDebugLogException(2,"_dialpad: PopulateListRecents",C)}}function p(e){try{if(common.isNull(e)||e.length<1)return void u();if(B=!1,common.isNull(document.getElementById("dialpad_list")))return void common.PutToDebugLog(2,"ERROR, _dialpad: PopulateListContacts listelement is null");g(e),common.PutToDebugLog(2,"EVENT, _dialpad Starting populate searched contact list");for(var o='<li data-theme="b"><a id="searcheditem_[CTID]" class="ch_anchor"><div class="item_container"><div class="ch_ctname">[NAME]</div><div id="ch_ctnumber_[CTID]" class="ch_ctnumber">[NUMBER]</div></div></a><a id="searchedmenu_[CTID]" class="ch_menu">Menu</a></li>',t="",a=0;a<global.searchctlist.length;a++)if(!(common.isNull(global.searchctlist[a])||global.searchctlist[a].length<1)){var n=o.replace("[CTID]",a);n=n.replace("[CTID]",a),n=n.replace("[CTID]",a),n=n.replace("[NAME]",global.searchctlist[a][common.CT_NAME]),n=n.replace("[NUMBER]",global.searchctlist[a][common.CT_NUMBER]),t+=n}j$("#dialpad_list").html(""),j$("#dialpad_list").append(t).listview("refresh")}catch(i){common.PutToDebugLogException(2,"_dialpad: PopulateListContacts",i)}}function g(e){try{if(common.isNull(e)||common.Trim(e).lengh<1)return void common.PutToDebugLog(2,"ERROR, _dialpad: SearchContacts value is NULL");e=e.toLowerCase(),global.searchctlist=[];for(var o=0;o<global.ctlist.length;o++){var t=!1,a=global.ctlist[o].slice(0);if(!common.isNull(a)){if(a[common.CT_NAME].toLowerCase().indexOf(e)>=0){t=!0;for(var n=0;n<a[common.CT_NUMBER].length;n++){var i=a.slice(0);a[common.CT_NUMBER][n];i[common.CT_NUMBER]=a[common.CT_NUMBER][n],global.searchctlist.push(i)}}if(!1===t&&!common.isNull(a[common.CT_NUMBER]))for(var n=0;n<a[common.CT_NUMBER].length;n++)if(a[common.CT_NUMBER][n].toLowerCase().indexOf(e)>=0){var i=a;i[common.CT_NUMBER]=a[common.CT_NUMBER][n],global.searchctlist.push(i)}}}}catch(l){common.PutToDebugLogException(2,"_dialpad: SearchContacts",l)}}function _(e,o){try{if(me)return;if(me=!0,setTimeout(function(){me=!1},1e3),common.isNull(e)||e.length<1)return void common.PutToDebugLog(2,"ERROR, _dialpad OnListItemClick id is NULL");var t="",a=e.indexOf("_");if(a<2)return void common.PutToDebugLog(2,"ERROR, _dialpad OnListItemClick invalid id");t=common.Trim(e.substring(a+1));var n=0;try{n=common.StrToInt(common.Trim(t))}catch(l){common.PutToDebugLogException(2,"_dialpad: OnListItemClick convert rcid",l)}if(0===e.indexOf("recentitem")){var i=global.recentlist[n][common.RC_NUMBER];global.recentlist[n][common.RC_NAME];common.PutToDebugLog(2,"EVENT, _dialpad recents call to: "+i),webphone_api.call(i,-1)}else if(0===e.indexOf("recentmenu"))h(n,!0,o);else if(0===e.indexOf("searcheditem"))if(!0===o)h(n,!1,o);else{var i=j$("#ch_ctnumber_"+n).html();global.searchctlist[n][common.CT_NAME];common.PutToDebugLog(2,"EVENT, _dialpad searched item call to: "+i),webphone_api.call(i,-1)}else 0===e.indexOf("searchedmenu")&&h(n,!1,o)}catch(c){common.PutToDebugLogException(2,"_dialpad: OnListItemClick",c)}}function h(e,o,t,a){try{if(common.isNull(e)||e.length<1||e<0||e>global.recentlist.length)return void common.PutToDebugLog(2,"ERROR, RecentMenu: invalid id: "+e);var n="",i="";o?(n=global.recentlist[e][common.RC_NAME],i=global.recentlist[e][common.RC_NUMBER]):(n=global.searchctlist[e][common.CT_NAME],i=j$("#ch_ctnumber_"+e).html()),common.isNull(n)&&(n=""),common.isNull(i)&&(i=""),common.GetContactIdFromNumber(i)>=0?!0===t?b(common.GetContactIdFromNumber(i),n,i,a):(global.intentctdetails[0]="ctid="+common.GetContactIdFromNumber(i),global.intentctdetails[1]="frompage=dialpad",j$.mobile.changePage("#page_contactdetails",{transition:"none",role:"page"})):!0===t?b("-1",n,i,a):(global.intentctdetails[0]="ctid=-1",global.intentctdetails[1]="ctname="+n,global.intentctdetails[2]="ctnumber="+i,global.intentctdetails[3]="frompage=dialpad",j$.mobile.changePage("#page_contactdetails",{transition:"none",role:"page"}))}catch(l){common.PutToDebugLogException(2,"_dialpad: RecentMenu",l)}}function b(e,o,t,a){try{(common.isNull(e)||e.length<1||!common.IsNumber(e))&&common.PutToDebugLog(2,"ERROR, _dialpad: CreateContextmenu invalid contact id: "+e);var n=common.StrToInt(e),i=common.GetDeviceWidth();i=!common.isNull(i)&&common.IsNumber(i)&&i>100?Math.floor(i/1.2):220;var c=!1;n>-1&&(c=!0);var m=!1;!0===c&&(m=common.ContactIsFavorite(n));var r="",d='<li id="[ITEMID]"><a data-rel="back">[ITEMTITLE]</a></li>',s="";if(!0===c&&(s=d.replace("[ITEMID]","#dp_item_edit_contact"),s=s.replace("[ITEMTITLE]",stringres.get("menu_editcontact")),r+=s,s=""),s=d.replace("[ITEMID]","#dp_item_call"),s=s.replace("[ITEMTITLE]",stringres.get("menu_call")),r+=s,s="",!0===common.CanIUseVideo()&&(s=d.replace("[ITEMID]","#dp_item_video_call"),s=s.replace("[ITEMTITLE]",stringres.get("btn_videocall")),r+=s,s=""),s=d.replace("[ITEMID]","#dp_item_message"),s=s.replace("[ITEMTITLE]",stringres.get("send_msg")),r+=s,s="",!1===common.GetConfigBool("hasfiletransfer",!0)||!0!==common.GetConfigBool("usingmizuserver",!1)&&!0!==common.IsMizuWebRTCGateway()||!0===common.Glft()&&(s=d.replace("[ITEMID]","#dp_item_filetransf"),s=s.replace("[ITEMTITLE]",stringres.get("filetransf_title")),r+=s,s=""),!0===c){var u=stringres.get("menu_ct_setfavorite");!0===m&&(u=stringres.get("menu_ct_unsetfavorite")),
s=d.replace("[ITEMID]","#dp_item_favorite"),s=s.replace("[ITEMTITLE]",u),r+=s,s=""}var p=o;(common.isNull(p)||p.length<1)&&(p=t);var g='<div id="dp_contextmenu" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+i+"px; min-width: "+Math.floor(.6*i)+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+p+'</h1></div><div role="main" class="ui-content adialog_content" style="padding: 0; margin: 0;"><ul id="dp_contextmenu_ul" data-role="listview" data-inset="true" data-icon="false" style="margin: 0;">'+r+'</ul></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" style="width: 98%;" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_close")+"</a></div></div>";a=a||function(){},j$.mobile.activePage.append(g).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#dp_contextmenu_ul").off("click","li"),a()}}),j$("#dp_contextmenu_ul").on("click","li",function(e){var o=j$(this).attr("id");j$("#dp_contextmenu").on("popupafterclose",function(e){j$("#dp_contextmenu").off("popupafterclose"),"#dp_item_edit_contact"===o?f(n):"#dp_item_delete_contact"===o?DeleteContact(n):"#dp_item_call"===o?(l(t),common.SaveParameter("redial",t)):"#dp_item_video_call"===o?(common.SaveParameter("redial",t),webphone_api.videocall(t)):"#dp_item_message"===o?common.StartMsg(t,"","_dialpad"):"#dp_item_filetransf"===o?common.FileTransfer(t):"#dp_item_favorite"===o&&(!0===m?(common.ContactSetFavorite(n,!1),common.ShowToast(stringres.get("ct_unsetfavorited"),1400)):(common.ContactSetFavorite(n,!0),common.ShowToast(stringres.get("menu_ct_setfavorite"),1400)))})})}catch(_){common.PutToDebugLogException(2,"_dialpad: CreateContextmenu",_)}}function f(e){try{global.intentaddeditct[0]="action=edit",global.intentaddeditct[1]="ctid="+e,j$.mobile.changePage("#page_addeditcontact",{transition:"pop",role:"page"})}catch(o){common.PutToDebugLogException(2,"_dialpad: EditContact",o)}}function v(){try{j$("#page_dialpad").css("min-height","auto"),j$(".separator_line_thick").css("background-color",common.HoverCalc(common.getBgColor("#page_dialpad"),-30));var e=common.GetDeviceWidth()-j$("#dialpad_additional_header_left").width()-j$("#dialpad_additional_header_right").width(),o=common.StrToIntPx(j$("#dialpad_additional_header_left").css("margin-left"));(common.isNull(o)||0===o)&&(o=10),o=Math.ceil(6*o),e=Math.floor(e-o)-20,j$("#dialpad_notification").height(Math.floor(j$("#dialpad_additional_header_left").height()));var t=common.GetDeviceHeight()-j$("#dialpad_header").height()-j$("#phone_number_container").height()-j$("#dialpad_footer").height()-common.StrToIntPx(j$("#dialpad_header").css("border-top-width"))-common.StrToIntPx(j$("#dialpad_header").css("border-bottom-width"));j$(".separator_color_bg").height(),j$("#dialpad_btn_grid").is(":visible")&&(t-=j$("#dialpad_btn_grid").height()),t-=3,j$("#dialpad_list").height(t);var a=common.GetBrandName();j$("#dialpad_title").is(":visible")&&(global.bname_charcount=common.GetTextLengthThatFits("app_name_dialpad",a,j$("#app_name_dialpad").width())),global.bname_charcount>0&&a.length>global.bname_charcount&&(j$("#dialpad_title").remove(),j$("#dialpad_additional_header_left").width("65%"));var n=j$("#dialpad_additional_header_left").width()-5;if(j$("#dialpad_presence").is(":visible")){var i=j$("#dialpad_presence").width();0===i&&(i=30),n-=i}if(j$("#app_name_dialpad").width(n),B&&(common.isNull(j$("#dialpad_list").html())||j$("#dialpad_list").html().length<1)){var l=common.GetDeviceHeight()-j$("#dialpad_header").height()-common.StrToIntPx(j$("#dialpad_header").css("border-top-width"))-common.StrToIntPx(j$("#dialpad_header").css("border-bottom-width"))-2*j$(".separator_color_bg").height();l=l-j$("#phone_number_container").height()-j$("#dialpad_footer").height(),l-=4;var c=Math.floor(l/4);j$("#dialpad_btn_grid .ui-btn").height(c)}else j$("#dialpad_btn_grid .ui-btn").height("auto")}catch(m){common.PutToDebugLogException(2,"_dialpad: MeasureDialPad",m)}}function E(){try{if(!0===global.aua_handled)return;global.aua_handled=!0;var e=common.GetParameter2("autoaction");if(common.isNull(e)||!common.IsNumber(e))return;var o=common.StrToInt(e);if(common.isNull(o)||o<1||o>3)return;var t=webphone_api.getcallto();if(common.isNull(t)||t.length<1)return;1===o?(common.PutToDebugLog(2,"EVENT, HandleAutoaction initiate call to: "+t),l(t,!1)):2===o?(common.PutToDebugLog(2,"EVENT, HandleAutoaction send message to: "+t),common.StartMsg(t,"","_dialpad")):3===o&&(common.PutToDebugLog(2,"EVENT, HandleAutoaction initiate video call to: "+t),l(t,!0))}catch(a){common.PutToDebugLogException(2,"_dialpad: HandleAutoaction",a)}}function j(){try{if(50===common.GetConfigInt("brandid",-1))return void w();var e=common.Trim(document.getElementById("phone_number").value);common.isNull(e)||e.length<1?common.StartMsg("","","_dialpad"):common.StartMsg(e,"","_dialpad")}catch(o){common.PutToDebugLogException(2,"_dialpad: MsgOnClick",o)}}function N(e){try{if(common.IsWindowsSoftphone()&&j$("#btn_dialpad_menu").removeAttr("data-transition"),common.isNull(e)||e.lenght<1)return void common.PutToDebugLog(2,"ERROR, _dialpad: CreateOptionsMenu menuid null");if(j$(e).length<=0)return void common.PutToDebugLog(2,"ERROR, _dialpad: CreateOptionsMenu can't get reference to Menu");"#"!==e.charAt(0)&&(e="#"+e),j$(e).html("");var o=common.GetParameterInt("featureset",3),t=common.GetParameter("extramenuurl"),a=common.GetParameter("extramenutxt");if(!common.isNull(t)&&t.length>5&&!common.isNull(a)&&a.length>0&&j$(e).append('<li id="'+be+'"><a data-rel="back">'+a+"</a></li>").listview("refresh"),j$(e).append('<li id="'+ge+'"><a data-rel="back">'+stringres.get("settings_title")+"</a></li>").listview("refresh"),o>1&&!common.isNull(common.GetParameter("accounturi"))&&common.GetParameter("accounturi").length>3&&j$(e).append('<li id="'+de+'"><a data-rel="back">'+stringres.get("myaccount")+"</a></li>").listview("refresh"),o>1&&!common.isNull(common.GetParameter("recharge"))&&common.GetParameter("recharge").length>3&&j$(e).append('<li id="'+pe+'"><a data-rel="back">'+stringres.get("recharge")+"</a></li>").listview("refresh"),!0===common.CanIUseVideo()&&j$(e).append('<li id="'+Pe+'"><a data-rel="back">'+stringres.get("video_call")+"</a></li>").listview("refresh"),!1===common.HideSettings("conference",stringres.get("sett_display_name_conference"),"conference",!0)&&(!0===common.GetConfigBool("usingmizuserver",!1)||!0===common.IsMizuWebRTCEmbeddedServer()||!0===common.IsMizuWebRTCGateway())&&!1===common.IsWindowsSoftphone()&&common.getuseengine()===global.ENGINE_WEBRTC){var n=common.GetParameterInt("conferencetype",1);1!==n&&3!==n&&5!==n&&6!==n&&7!==n||!0===common.Glcf()&&j$(e).append('<li id="'+Te+'"><a data-rel="back">'+stringres.get("menu_confrooms")+"</a></li>").listview("refresh")}!0===common.CanIUseScreensharing()&&j$(e).append('<li id="'+ke+'"><a data-rel="back">'+stringres.get("menu_screenshare")+"</a></li>").listview("refresh"),!1===common.GetConfigBool("hasfiletransfer",!0)||!0!==common.GetConfigBool("usingmizuserver",!1)&&!0!==common.IsMizuWebRTCGateway()||!0===common.Glft()&&j$(e).append('<li id="'+je+'"><a data-rel="back">'+stringres.get("filetransf_title")+"</a></li>").listview("refresh"),o>1&&!common.isNull(common.GetParameter("p2p"))&&common.GetParameter("p2p").length>3&&j$(e).append('<li id="'+se+'"><a data-rel="back">'+stringres.get("p2p")+"</a></li>").listview("refresh"),o>1&&(common.GetParameter2("callback").length>3||common.GetConfig("callbacknumber").length>3||common.GetParameter2("callbacknumber").length>3)&&j$(e).append('<li id="'+ue+'"><a data-rel="back">'+stringres.get("callback")+"</a></li>").listview("refresh"),o>1&&common.GetParameter("accessnumber").length>1&&j$(e).append('<li id="'+fe+'"><a data-rel="back">'+stringres.get("menu_call_access")+"</a></li>").listview("refresh"),(common.getuseengine()!==global.ENGINE_WEBRTC||"Firefox"!==common.GetBrowser()&&"Chrome"!==common.GetBrowser())&&(!0!==global.audio_devices_loaded||common.GetParameter("devicetype")!==common.DEVICE_WIN_SOFTPHONE()&&common.getuseengine()!==global.ENGINE_SERVICE&&common.getuseengine()!==global.ENGINE_WEBPHONE)||50!==common.GetConfigInt("brandid",-1)&&j$(e).append('<li id="'+Ne+'"><a data-rel="back">'+stringres.get("audio_title")+"</a></li>").listview("refresh");var i=common.GetParameter("linktext"),l=common.GetParameter("linkurl"),c=common.GetParameter("linktext2"),m=common.GetParameter("linkurl2"),r=common.GetParameter("linktext3"),d=common.GetParameter("linkurl3");if(!common.isNull(i)&&i.length>0&&!common.isNull(l)&&l.length>0&&j$(e).append('<li id="'+we+'"><a data-rel="back">'+i+"</a></li>").listview("refresh"),!common.isNull(c)&&c.length>0&&!common.isNull(m)&&m.length>0&&j$(e).append('<li id="'+ye+'"><a data-rel="back">'+c+"</a></li>").listview("refresh"),!common.isNull(r)&&r.length>0&&!common.isNull(d)&&d.length>0&&j$(e).append('<li id="'+Re+'"><a data-rel="back">'+r+"</a></li>").listview("refresh"),!common.isNull(global.custmenusL)&&global.custmenusL.length>0)for(var s=0;s<global.custmenusL.length;s++){var u=2e3+s;j$(e).append('<li id="dialpad_custmenu_'+u+'"><a data-rel="back">'+global.custmenusL[s].label+"</a></li>").listview("refresh")}common.IsWindowsSoftphone()&&j$(e).append('<li id="'+he+'"><a data-rel="back">'+stringres.get("menu_exit")+"</a></li>").listview("refresh");var p=stringres.get("menu_help")+"...";return j$(e).append('<li id="'+_e+'"><a data-rel="back">'+p+"</a></li>").listview("refresh"),!0}catch(g){common.PutToDebugLogException(2,"_dialpad: CreateOptionsMenu",g)}return!1}function T(e){try{if(common.isNull(e)||e.length<1)return;if(e===de)return void I();j$("#dialpad_menu").on("popupafterclose",function(o){if(j$("#dialpad_menu").off("popupafterclose"),0===e.indexOf("dialpad_custmenu_")&&(e=e.replace("dialpad_custmenu_",""),common.IsNumber(e))){var t=common.StrToInt(e);if((t-=2e3)>=0){var a=global.custmenusL[t].action,n=global.custmenusL[t].data,i=global.custmenusL[t].label;common.PutToDebugLog(2,"EVENT, MenuItemSelected custom menu action: "+a+"; data: "+n),"dial"===a.toLowerCase()?l(n):"link"===a.toLowerCase()?common.OpenWebURL(n,i):common.PutToDebugLog(1,"ERROR, Invalid Menu action: "+a)}}switch(e){case be:common.OpenWebURL(common.GetParameter("extramenuurl"),common.GetParameter("extramenutxt"));break;case ge:common.OpenSettings(!0,14);break;case re:common.OpenWebURL(common.GetParameter("homepage"),stringres.get("myprovider"));break;case se:common.Phone2Phone("","");break;case ue:G();break;case pe:w();break;case _e:common.HelpWindow("dialpad");break;case he:common.Exit();break;case fe:L();break;case ve:R();break;case je:common.FileTransfer(j$("#phone_number").val());break;case Ee:common.UpgradeToProVersion();break;case Ne:webphone_api.devicepopup();break;case Te:P("");break;case Pe:y("");break;case $e:l("**",!1);break;case ke:C();break;case Ie:$();break;case Ce:k();break;case we:common.OpenWebURL(common.GetParameter("linkurl"),common.GetParameter("linktext"));break;case ye:common.OpenWebURL(common.GetParameter("linkurl2"),common.GetParameter("linktext2"));break;case Re:common.OpenWebURL(common.GetParameter("linkurl3"),common.GetParameter("linktext3"))}})}catch(o){common.PutToDebugLogException(2,"_dialpad: MenuItemSelected",o)}}function P(e){try{var o=common.GetParameterInt("conferencetype",1);if(1===o||3===o){var t=common.GetDeviceWidth();t=!common.isNull(t)&&common.IsNumber(t)&&t>100?Math.floor(t/1.2):220;var a=stringres.get("confdtmf_msg");common.isNull(e)&&(e="");var n='<div id="conferencedtmf_popup" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+t+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("menu_confrooms")+'</h1></div><div role="main" class="ui-content adialog_content adialog_btn_nexttoinput"><span>'+a+'</span><div style="clear: both;">\x3c!--//--\x3e</div><input type="text" id="conferencedtmf_input" name="setting_item" data-theme="a" autocapitalize="off" value="'+e+'"/><button id="btn_pickct" class="btn_nexttoinput ui-btn ui-btn-corner-all ui-btn-b noshadow"><img src="'+common.GetElementSource()+'images/btn_add_contact_txt.png"></button></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_ok")+'</a><a href="javascript:;" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+stringres.get("btn_cancel")+"</a></div></div>";j$.mobile.activePage.append(n).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#adialog_positive").off("click"),j$("#adialog_negative").off("click"),j$("#btn_pickct").off("click")}});var i=document.getElementById("conferencedtmf_input");!common.isNull(e)&&e.length>1&&(i.value=common.Trim(e)),common.isNull(i)||i.focus(),setTimeout(function(){common.isNull(i)||i.focus()},150),j$("#adialog_positive").on("click",function(e){common.PutToDebugLog(5,"EVENT, call Conferencedtmf ok onclick");var o=common.Trim(i.value);j$("#conferencedtmf_popup").on("popupafterclose",function(e){!common.isNull(o)&&o.length>0?(common.PutToDebugLog(2,"EVENT, mlogic ConferenceDialpad: "+o),webphone_api.dtmf("*1*"+o+"#")):common.ShowToast(stringres.get("err_msg_4"))})}),j$("#adialog_negative").on("click",function(e){}),j$("#btn_pickct").on("click",function(e){j$.mobile.activePage.find(".messagePopup").popup("close"),j$("#conferencedtmf_popup").on("popupafterclose",function(e){j$("#conferencedtmf_popup").off("popupafterclose"),common.PickContact(P)})})}else common.CreateConferenceRoom(!0)}catch(l){common.PutToDebugLogException(2,"_dialpad: ConferenceDialpad",l)}}function $(e){try{var o=common.GetDeviceWidth();o=!common.isNull(o)&&common.IsNumber(o)&&o>100?Math.floor(o/1.2):220;var t="",a='<li id="[ITEMID]"><a data-rel="back" title="[ITEMHINT]">[ITEMTITLE]</a></li>',n="";n=a.replace("[ITEMID]","#item_integrate_outlook"),n=n.replace("[ITEMTITLE]",stringres.get("menu_int_outlook")),n=n.replace("[ITEMHINT]",stringres.get("hint_int_outlook")),t+=n,n="",n=a.replace("[ITEMID]","#item_integrate_chrome"),n=n.replace("[ITEMTITLE]",stringres.get("menu_int_chrome")),n=n.replace("[ITEMHINT]",stringres.get("hint_int_chrome")),t+=n,n="";var i='<div id="integration_window" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+o+"px; min-width: "+Math.floor(.6*o)+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("menu_integration")+'</h1></div><div role="main" class="ui-content adialog_content" style="padding: 0; margin: 0;"><ul id="integration_window_ul" data-role="listview" data-inset="true" data-icon="false" style="margin: 0;">'+t+'</ul></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" style="width: 98%;" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_close")+"</a></div></div>";e=e||function(){},j$.mobile.activePage.append(i).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#integration_window_ul").off("click","li"),e()}}),j$("#integration_window_ul").on("click","li",function(e){var o=j$(this).attr("id");j$("#integration_window").on("popupafterclose",function(e){if(j$("#integration_window").off("popupafterclose"),"#item_integrate_outlook"===o){common.PutToDebugLog(4,"EVENT, _dialpad: Integration outlook clicked");var t=common.AddJscommport(global.WIN_SOFTPHONE_URL)+"?extcmd_integrate_outlook";common.WinSoftphoneHttpReq(t,"GET","",function(e){common.PutToDebugLog(2,"EVENT, Integration outlook answer: "+e)})}else if("#item_integrate_chrome"===o){common.PutToDebugLog(4,"EVENT, _dialpad: Integration chrome clicked");var t=common.AddJscommport(global.WIN_SOFTPHONE_URL)+"?extcmd_integrate_chorme";common.WinSoftphoneHttpReq(t,"GET","",function(e){common.PutToDebugLog(2,"EVENT, Integration chrome answer: "+e)})}else common.PutToDebugLog(2,"ERROR, _dialpad: Integration invalid item id: "+o)})})}catch(l){common.PutToDebugLogException(2,"_dialpad: Integration",l)}}function k(e){try{var o=common.GetDeviceWidth();o=!common.isNull(o)&&common.IsNumber(o)&&o>100?Math.floor(o/1.2):220;var t="",a='<li id="[ITEMID]"><a data-rel="back" title="[ITEMHINT]">[ITEMTITLE]</a></li>',n="";n=a.replace("[ITEMID]","#item_folders_bin"),n=n.replace("[ITEMTITLE]",stringres.get("menu_folders_bin")),n=n.replace("[ITEMHINT]",stringres.get("hint_folders_bin")),t+=n,n="",n=a.replace("[ITEMID]","#item_folders_data"),n=n.replace("[ITEMTITLE]",stringres.get("menu_folders_data")),n=n.replace("[ITEMHINT]",stringres.get("hint_folders_data")),t+=n,n="";var i='<div id="folders_window" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+o+"px; min-width: "+Math.floor(.6*o)+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("menu_folders")+'</h1></div><div role="main" class="ui-content adialog_content" style="padding: 0; margin: 0;"><ul id="folders_window_ul" data-role="listview" data-inset="true" data-icon="false" style="margin: 0;">'+t+'</ul></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" style="width: 98%;" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_close")+"</a></div></div>";e=e||function(){},j$.mobile.activePage.append(i).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#folders_window_ul").off("click","li"),e()}}),j$("#folders_window_ul").on("click","li",function(e){var o=j$(this).attr("id");j$("#folders_window").on("popupafterclose",function(e){if(j$("#folders_window").off("popupafterclose"),"#item_folders_bin"===o){common.PutToDebugLog(4,"EVENT, _dialpad: folders BIN clicked");var t=common.AddJscommport(global.WIN_SOFTPHONE_URL)+"?extcmd_folder_bin";common.WinSoftphoneHttpReq(t,"GET","",function(e){common.PutToDebugLog(2,"EVENT, folders BIN answer: "+e)})}else if("#item_folders_data"===o){common.PutToDebugLog(4,"EVENT, _dialpad: folders DATA clicked");var t=common.AddJscommport(global.WIN_SOFTPHONE_URL)+"?extcmd_folder_data";common.WinSoftphoneHttpReq(t,"GET","",function(e){common.PutToDebugLog(2,"EVENT, folders DATA answer: "+e)})}else common.PutToDebugLog(2,"ERROR, _dialpad: folders invalid item id: "+o)})})}catch(l){common.PutToDebugLogException(2,"_dialpad: Folders",l)}}function I(){try{var e=common.GetParameter("accounturi");!0===common.IsMizuServer()||e.indexOf("/mvweb")>0?(e=common.OpenWebURL(e,"",!1),!0===common.IsWindowsSoftphone()?common_public.OpenLinkInExternalBrowser(e):window.open(e)):common.OpenWebURL(e,stringres.get("myaccount"))}catch(o){common.PutToDebugLogException(2,"_dialpad: MyAccount",o)}}function C(e){try{var o=document.getElementById("phone_number");if(common.isNull(o))return;var t=o.value;if(!common.isNull(t)&&(t=common.Trim(t),t.length>0))return t=common.NormalizeNumber(t),common.PutToDebugLog(4,"EVENT, _dialpad initiate screenshare call to: "+t),void webphone_api.screenshare(t);var a=common.GetDeviceWidth();a=!common.isNull(a)&&common.IsNumber(a)&&a>100?Math.floor(a/1.2):220;var n='<div id="adialog_screensharecall" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+a+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("screenshare_call")+'</h1></div><div role="main" class="ui-content adialog_content adialog_btn_nexttoinput"><span>'+stringres.get("phone_nr")+':</span><div style="clear: both;">\x3c!--//--\x3e</div><input type="text" id="screensharecall_input" name="screensharecall_input" data-theme="a" autocapitalize="off"/><button id="btn_pickct" class="btn_nexttoinput ui-btn ui-btn-corner-all ui-btn-b noshadow"><img src="'+common.GetElementSource()+'images/btn_add_contact_txt.png"></button></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_sharescreen")+'</a><a href="javascript:;" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+stringres.get("btn_cancel")+"</a></div></div>";j$.mobile.activePage.append(n).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#adialog_positive").off("click"),j$("#adialog_negative").off("click"),j$("#btn_pickct").off("click")}});var i=document.getElementById("screensharecall_input");common.isNull(i)||(!common.isNull(e)&&e.length>0&&(i.value=e),i.focus()),j$("#adialog_positive").on("click",function(e){j$("#adialog_screensharecall").on("popupafterclose",function(e){t=i.value,common.PutToDebugLog(5,"EVENT, _dialpad ScreenShare 1 ok: "+t),common.isNull(t)||common.Trim(t).length<1||(t=common.Trim(t),t=common.NormalizeNumber(t),webphone_api.screenshare(t))})}),j$("#adialog_negative").on("click",function(e){}),j$("#btn_pickct").on("click",function(e){j$.mobile.activePage.find(".messagePopup").popup("close"),j$("#adialog_screensharecall").on("popupafterclose",function(e){j$("#adialog_screensharecall").off("popupafterclose"),common.PickContact(C)})})}catch(l){common.PutToDebugLogException(2,"_dialpad: ScreenShare",l)}}function w(){try{var e=common.GetParameter("recharge");if(0!==common.Trim(e).indexOf("*"))return void common.OpenWebURL(e,stringres.get("recharge"));var o=common.GetDeviceWidth();o=!common.isNull(o)&&common.IsNumber(o)&&o>100?Math.floor(o/1.2):220;var t='<div id="adialog_recharge" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+o+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("recharge")+'</h1></div><div role="main" class="ui-content adialog_content"><span>'+stringres.get("recharge_msg")+':</span><input type="text" id="recharge_input" name="recharge_input" data-theme="a" autocapitalize="off"/></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_ok")+'</a><a href="javascript:;" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+stringres.get("btn_cancel")+"</a></div></div>";j$.mobile.activePage.append(t).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#adialog_positive").off("click"),j$("#adialog_negative").off("click")}});var a=document.getElementById("recharge_input");common.isNull(a)||a.focus(),j$("#adialog_positive").on("click",function(e){common.PutToDebugLog(5,"EVENT, _dialpad CreditRecharge 1 ok");var o=a.value;if(common.isNull(o)||common.Trim(o).length<1)return void common.ShowToast(stringres.get("recharge_error"));o=common.Trim(o),common.UriParser(common.GetParameter("recharge"),o,"","","","recharge")}),j$("#adialog_negative").on("click",function(e){})}catch(n){common.PutToDebugLogException(2,"_dialpad: CreditRecharge",n)}}function y(e){try{var o=document.getElementById("phone_number");if(common.isNull(o))return;var t=o.value;if(!common.isNull(t)&&(t=common.Trim(t),t.length>0))return void l(t,!0);var a=common.GetParameter("redial");common.isNull(a)&&(a="");var n=common.GetDeviceWidth();n=!common.isNull(n)&&common.IsNumber(n)&&n>100?Math.floor(n/1.2):220;var i='<div id="adialog_videocall" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+n+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("video_call")+'</h1></div><div role="main" class="ui-content adialog_content adialog_btn_nexttoinput"><span>'+stringres.get("phone_nr")+':</span><div style="clear: both;">\x3c!--//--\x3e</div><input type="text" id="videocall_input" name="videocall_input" value="'+a+'" data-theme="a" autocapitalize="off"/><button id="btn_pickct" class="btn_nexttoinput ui-btn ui-btn-corner-all ui-btn-b noshadow"><img src="'+common.GetElementSource()+'images/btn_add_contact_txt.png"></button></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_videocall")+'</a><a href="javascript:;" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+stringres.get("btn_cancel")+"</a></div></div>";j$.mobile.activePage.append(i).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#adialog_positive").off("click"),j$("#adialog_negative").off("click"),j$("#btn_pickct").off("click")}});var c=document.getElementById("videocall_input");common.isNull(c)||(!common.isNull(e)&&e.length>0&&(c.value=e),c.focus()),j$("#adialog_positive").on("click",function(e){j$("#adialog_videocall").on("popupafterclose",function(e){t=c.value,common.PutToDebugLog(5,"EVENT, _dialpad VideoCall 1 ok: "+t),common.isNull(t)||common.Trim(t).length<1||(t=common.Trim(t),common.SaveParameter("redial",t),webphone_api.videocall(t))})}),j$("#adialog_negative").on("click",function(e){}),j$("#btn_pickct").on("click",function(e){j$.mobile.activePage.find(".messagePopup").popup("close"),j$("#adialog_videocall").on("popupafterclose",function(e){j$("#adialog_videocall").off("popupafterclose"),common.PickContact(y)})})}catch(m){common.PutToDebugLogException(2,"_dialpad: VideoCall",m)}}function R(){try{var e=common.GetParameter("voicemailnum");(common.isNull(e)||e.length<1)&&!0===common.IsMizuServer()&&(e="5001",common.SaveParameter("voicemailnum",e)),!common.isNull(e)&&e.length>0?l(e):common.SetVoiceMailNumber(function(e){!common.isNull(e)&&e.length>0&&l(e)})}catch(o){common.PutToDebugLogException(2,"_dialpad: MenuVoicemail",o)}}function G(){try{var e=common.GetParameter2("callback");e.length<3&&(e=common.GetConfig("callback"));var o=common.GetParameter2("callbacknumber");if(o.length<3&&(o=common.GetConfig("callbacknumber")),!common.isNull(e)&&e.length>2){var t=common.GetDeviceWidth();t=!common.isNull(t)&&common.IsNumber(t)&&t>100?Math.floor(t/1.2):220;var a='<div id="adialog_callback" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+t+'px;"><div data-role="header" data-theme="b"><a href="javascript:;" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+stringres.get("callback")+'</h1></div><div role="main" class="ui-content adialog_content"><span>'+stringres.get("callback_src")+'</span><input type="text" id="callback_input" name="callback_input" data-theme="a" autocapitalize="off"/></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="javascript:;" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+stringres.get("btn_ok")+'</a><a href="javascript:;" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+stringres.get("btn_cancel")+"</a></div></div>";j$.mobile.activePage.append(a).trigger("create"),j$.mobile.activePage.find(".closePopup").bind("tap",function(e){j$.mobile.activePage.find(".messagePopup").popup("close")}),j$.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){j$(this).unbind("popupafterclose").remove(),j$("#adialog_positive").off("click"),j$("#adialog_negative").off("click")}});var n=document.getElementById("callback_input");common.isNull(n)||n.focus();var i=common.GetParameter("last_callback_nr");!common.isNull(i)&&i.length>0&&(n.value=i),j$("#adialog_positive").on("click",function(o){common.PutToDebugLog(5,"EVENT, _dialpad Phone2Phone 1 ok");var t=n.value;if(common.isNull(t)||common.Trim(t).length<1)return void common.ShowToast(stringres.get("callback_src"));t=common.Trim(t),common.UriParser(e,"",t,"","","callback"),common.SaveParameter("last_callback_nr",t)}),j$("#adialog_negative").on("click",function(e){})}else if(!common.isNull(o)&&o.length>2)if(!0===webphone_api.isregistered())l(o);else{var c='<a href="tel:'+o+'">'+o+"</a>",m='<a href="sip:'+o+'">'+o+"</a>",r="",d=common.GetOs();r="Windows"===d||"MacOS"===d||"Linux"===d?stringres.get("cb_callonnative")+": "+m+"<br /><br />"+stringres.get("cb_callonmobile")+": "+c:stringres.get("cb_callonmobile")+": "+c,common.AlertDialog(stringres.get("callback"),r)}else common.PutToDebugLog(2,"ERROR,_dialpad: Callback, cannot find callback method, number: "+o+"; uri: "+e)}catch(s){common.PutToDebugLogException(2,"_dialpad: Callback",s)}}function L(){try{var e=common.GetParameter("accessnumber"),o=common.GetOs();"Windows"===o||"MacOS"===o||"Linux"===o?common.CallNumberProtocolHandler("sip",e):common.CallNumberProtocolHandler("tel",e)}catch(t){common.PutToDebugLogException(2,"_dialpad: CallAccessNumber",t)}}function x(e){try{common.PutToDebugLog(4,"EVENT, _dialpad: onStop"),
global.isDialpadStarted=!1,document.getElementById("phone_number").value=""}catch(o){common.PutToDebugLogException(2,"_dialpad: onStop",o)}}function D(e){}var M="",S=!1,B=!0,O=0,U=-1,A=-1,H=!0,V=!1,W=!1,F=!1,z=!1,q=17,Y=18,K=16,J=new Array;J[0]="Jan",J[1]="Feb",J[2]="Mar",J[3]="Apr",J[4]="May",J[5]="Jun",J[6]="Jul",J[7]="Aug",J[8]="Sep",J[9]="Oct",J[10]="Nov",J[11]="Dec";var Q=1200,X=100,Z=70,ee=50,oe=40,te=30,ae=20,ne=3,ie=10,le=1.4,ce=10,me=!1,re="#menuitem_dialpad_provider",de="#menuitem_dialpad_myaccount",se="#menuitem_dialpad_p2p",ue="#menuitem_dialpad_callback",pe="#menuitem_dialpad_recharge",ge="#menuitem_dialpad_settings",_e="#menuitem_dialpad_help",he="#menuitem_dialpad_exit",be="#menuitem_dialpad_extra",fe="#menuitem_dialpad_accessnr",ve="#menuitem_dialpad_voicemail",Ee="#menuitem_dialpad_proversion",je="#menuitem_dialpad_filetransfer",Ne="#menuitem_dialpad_audiosettings",Te="#menuitem_dialpad_conferencerooms",Pe="#menuitem_dialpad_videocall",$e="#menuitem_dialpad_callpickup_101voice",ke="#menuitem_screenshare",Ie="menuitem_dialpad_integration",Ce="menuitem_dialpad_folders",we="menuitem_dialpad_custom_link",ye="menuitem_dialpad_custom_link2",Re="menuitem_dialpad_custom_link3",Ge={PopulateListRecents:u,HandleAutoaction:E,MeasureDialPad:v};return window.dialpad_public=Ge,{onCreate:e,onStart:m,onStop:x,onDestroy:D,PopulateListRecents:u}}();