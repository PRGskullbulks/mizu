wpa._internalbrowser=function(){function e(e){try{common.PutToDebugLog(4,"EVENT, _internalbrowser: onCreate"),j$(window).resize(function(){"page_internalbrowser"===j$.mobile.activePage.attr("id")&&o()}),j$("#internalbrowser_menu_ul").on("click","li",function(e){i(j$(this).attr("id"))}),j$("#btn_internalbrowser_menu").on("click",function(){r("#internalbrowser_menu_ul")}),j$("#btn_internalbrowser_menu").attr("title",stringres.get("hint_menu")),j$("#internalbrowser_btnback").on("click",function(e){a(),e.preventDefault()})}catch(n){common.PutToDebugLogException(2,"_internalbrowser: onCreate",n)}}function n(e){try{common.PutToDebugLog(4,"EVENT, _internalbrowser: onStart"),global.isInternalbrowserStarted=!0,j$("#page_internalbrowser_content").html(""),s=common.GetIntentParam(global.intentbrowser,"url"),c=common.GetIntentParam(global.intentbrowser,"lastpage"),b=common.GetIntentParam(global.intentbrowser,"title"),common.isNull(document.getElementById("internalbrowser_title"))||(common.isNull(b)&&(b=""),document.getElementById("internalbrowser_title").innerHTML=b),j$("#internalbrowser_title").attr("title",stringres.get("hint_page")),common.isNull(document.getElementById("internalbrowser_btnback"))||(document.getElementById("internalbrowser_btnback").innerHTML="<b>&LT;</b>&nbsp;"+stringres.get("go_back_btn_txt")),o(),c=common.isNull(c)?"":common.Trim(c),j$("#page_internalbrowser").css("background","#FFFFFF"),t()}catch(n){common.PutToDebugLogException(2,"_internalbrowser: onStart",n)}}function o(){try{j$("#page_internalbrowser").css("min-height","auto"),j$(".separator_line_thick").css("background-color",common.HoverCalc(common.getBgColor("#page_internalbrowser"),-30));var e=common.GetDeviceHeight()-j$("#internalbrowser_header").height();e-=3,e=Math.floor(e),j$("#page_internalbrowser_content").height(e),j$("#iframe_internalbrowser").width(common.GetDeviceWidth()),j$("#iframe_internalbrowser").height(e-5)}catch(n){common.PutToDebugLogException(2,"_internalbrowser: MeasureInternalbrowser",n)}}function t(){try{if(common.isNull(s)||s.length<3)return void common.PutToDebugLog(3,"ERROR, _internalbrowser no url to load: "+s);var e=common.GetDeviceWidth(),n=Math.floor(j$("#page_internalbrowser_content").height()-5),o="",t=s.indexOf("[POST]");if(t>0){var r=common.Trim(s.substring(0,t)),i=common.Trim(s.substring(t+6)),a=[],l="";!common.isNull(i)&&i.length>0&&(a=i.split("&"),common.isNull(a)&&(a=[]));for(var m=0;m<a.length;m++)if(!(common.isNull(a[m])||a[m].length<2||a[m].indexOf("=")<1)){var c=a[m].substring(0,a[m].indexOf("=")),b=a[m].substring(a[m].indexOf("=")+1);common.isNull(c)||c.length<1||common.isNull(b)||(l+='<input type="hidden" name="'+c+'" value="'+b+'"/>')}o='<form id="internalb_post" target="iframe_internalbrowser" method="post" action="'+r+'">'+l+'</form><iframe allow="microphone; camera" frameborder="0" width="'+e+'" height="'+n+'" name="iframe_internalbrowser" id="iframe_internalbrowser" style="margin:0px; padding:0px;" sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation"></iframe><script type="text/javascript">document.getElementById("internalb_post").submit();<\/script>'}else o='<iframe allow="microphone; camera" frameborder="0" width="'+e+'" height="'+n+'" src="'+s+'" name="iframe_internalbrowser" id="iframe_internalbrowser" style="margin:0px; padding:0px;" sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation"></iframe>';j$("#page_internalbrowser_content").html(o)}catch(u){common.PutToDebugLogException(2,"_internalbrowser: OpenWebpage",u)}}function r(e){try{return common.GetParameter("devicetype")===common.DEVICE_WIN_SOFTPHONE()&&j$("#btn_internalbrowser_menu").removeAttr("data-transition"),common.isNull(e)||e.lenght<1?void common.PutToDebugLog(2,"ERROR, _internalbrowser: CreateOptionsMenu menuid null"):j$(e).length<=0?void common.PutToDebugLog(2,"ERROR, _internalbrowser: CreateOptionsMenu can't get reference to Menu"):("#"!==e.charAt(0)&&(e="#"+e),j$(e).html(""),j$(e).append('<li id="'+u+'"><a data-rel="back">'+stringres.get("menu_close")+"</a></li>").listview("refresh"),!0)}catch(n){common.PutToDebugLogException(2,"_internalbrowser: CreateOptionsMenu",n)}return!1}function i(e){try{if(common.isNull(e)||e.length<1)return;j$("#internalbrowser_menu").on("popupafterclose",function(n){switch(j$("#internalbrowser_menu").off("popupafterclose"),e){case u:a()}})}catch(n){common.PutToDebugLogException(2,"_internalbrowser: MenuItemSelected",n)}}function a(){try{c.length<2?(j$.mobile.back(),common.PutToDebugLog(5,"EVENT, _internalbrowser: CloseBrowser back")):(j$.mobile.changePage("#"+c,{transition:"pop",role:"page"}),common.PutToDebugLog(5,"EVENT, _internalbrowser: CloseBrowser changepage: "+c))}catch(e){common.PutToDebugLogException(2,"_internalbrowser: CloseBrowser",e)}}function l(e){try{common.PutToDebugLog(4,"EVENT, _internalbrowser: onStop"),global.isInternalbrowserStarted=!1,j$("#page_internalbrowser_content").html("")}catch(n){common.PutToDebugLogException(2,"_internalbrowser: onStop",n)}}function m(e){}var s="",c="",b="",u="#menuitem_internalbrowser_close";return{onCreate:e,onStart:n,onStop:l,onDestroy:m}}();