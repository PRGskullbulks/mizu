wpa._logview=function(){function e(e){try{common.PutToDebugLog(4,"EVENT, _logview: onCreate"),j$(window).resize(function(){"page_logview"===j$.mobile.activePage.attr("id")&&t()}),j$("#logview_menu_ul").on("click","li",function(e){i(j$(this).attr("id"))}),j$("#btn_logview_menu").on("click",function(){n("#logview_menu_ul")}),j$("#btn_logview_menu").attr("title",stringres.get("hint_menu")),j$("#support_selectall").on("click",function(){j$("#log_text").select()}),j$("#sendtosupport").on("click",function(){var e="Build date: "+common.GetParameter("codegenerated");common.SendLog(e+"&#10;"+global.logs)}),"Android"!==common.GetOs()&&"iOS"!==common.GetOs()||j$("#support_selectall").hide(),j$("#btn_loghelp").on("click",function(){common.AlertDialog(stringres.get("help"),stringres.get("logview_help")+" "+common.GetParameter("support_email"))}),j$("#btn_sendlog").on("click",function(){if(common.PutToDebugLog(1,"EVENT, Log upload succeded"),setTimeout(function(){common.PutToDebugLog(1,"EVENT, Log upload succeded")},500),common.GetParameter("email").length<1){var e=prompt(stringres.get("log_email"));!common.isNull(e)&&e.length>3&&(common.isNull(e.match("^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9|-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"))||common.SaveParameter("email",e))}var o=prompt(stringres.get("log_description"));if(common.isNull(o)||o.length<3)return common.ShowToast(stringres.get("log_desc_error")),!1;var t="\n\nProblem description: "+o+"\n\n";return j$("#log_text").html(t+j$("#log_text").html()),!0}),"Android"!==common.GetOs()&&"iOS"!==common.GetOs()&&j$("#log_text").attr("readonly","readonly")}catch(o){common.PutToDebugLogException(2,"_logview: onCreate",o)}}function o(e){try{common.PutToDebugLog(4,"EVENT, _logview: onStart"),global.isLogviewStarted=!0,common.isNull(document.getElementById("logview_title"))||(document.getElementById("logview_title").innerHTML=stringres.get("logview_title")),j$("#logview_title").attr("title",stringres.get("hint_page")),common.isNull(document.getElementById("logview_btnback"))||(document.getElementById("logview_btnback").innerHTML="<b>&LT;</b>&nbsp;"+stringres.get("go_back_btn_txt")),j$(".separator_line_thick").css("background-color",common.HoverCalc(common.getBgColor("#logview_header"),-30)),j$("#label_disable_logs").html(stringres.get("disable_logs"));var o=common.GetConfigInt("logsendto",1);if(o<1)j$("#sendtosupport_container").hide();else if(1===o)j$("#sendtosupport_link").hide(),j$("#sendtosupport_container").show();else if(2===o){j$("#btn_sendlog").hide();var n=common.GetConfig("supportmail");if((common.isNull(n)||n.length<2)&&(n=common.GetConfig("log_email")),!common.isNull(common.GetConfig("log_email"))&&n.length>2){j$("#sendtosupport_link").html(stringres.get("sendtosupport")),j$("#sendtosupport_link").show();var i="mailto:"+common.Trim(n)+"?subject="+encodeURIComponent("WebPhone Log")+"&body="+stringres.get("support_email_body");j$("#sendtosupport_link").attr("href",i)}}common.IsWindowsSoftphone()&&j$("#sendtosupport_link").hide(),t();var l="Build date: "+common.GetParameter("codegenerated");if(j$("#log_text").html(l+"&#10;"+global.logs),!common.isNull(document.getElementById("filename"))){var m=common.GetParameter("serveraddress_user");m.length<2&&(m=common.GetParameter("serveraddress"));try{m.length<2&&!isNull(webphone_api.parameters)&&!isNull(webphone_api.parameters.serveraddress)&&(m=webphone_api.parameters.serveraddress)}catch(g){}m.length<2&&(m=common.GetConfig("serveraddress")),common.isNull(m)&&(m=""),m=m.replace("://","");var r=common.GetParameter("logform_filename");(common.isNull(r)||r.length<1)&&(r=common.GetSipusername(),common.isNull(common.GetParameter("brandname"))||(r=r+"_"+encodeURIComponent(common.GetParameter("brandname"))),common.isNull(m)||(r=r+"_"+encodeURIComponent(m))),common.PutToDebugLog(2,"EVENT, _logview filename: "+r),document.getElementById("filename").value=r}if(!common.isNull(document.getElementById("wplocation")))try{var c=window.location.href;if(!common.isNull(c)&&c.length>0){c=c.toLowerCase();var a=c.indexOf("#");a>0&&(c=c.substring(0,a)),common.isNull(c)&&(c=""),c=common.Trim(c),document.getElementById("wplocation").value=c}}catch(s){common.PutToDebugLogException(2,"_logview: onStart Inner",s)}}catch(s){common.PutToDebugLogException(2,"_logview: onStart",s)}}function t(){try{j$("#page_logview").css("min-height","auto"),j$("#page_logview_content").height(common.GetDeviceHeight()-j$("#logview_header").height()-2);var e=common.GetDeviceHeight()-j$("#logview_header").height()-5;j$("#sendtosupport_container").is(":visible")&&(e-=j$("#sendtosupport_container").height()),j$("#log_text").height(e),j$("#log_text").width(common.GetDeviceWidth())}catch(o){common.PutToDebugLogException(2,"_logview: MeasureLogview",o)}}function n(e){try{return common.GetParameter("devicetype")===common.DEVICE_WIN_SOFTPHONE()&&j$("#btn_logview_menu").removeAttr("data-transition"),common.isNull(e)||e.lenght<1?void common.PutToDebugLog(2,"ERROR, _logview: CreateOptionsMenu menuid null"):j$(e).length<=0?void common.PutToDebugLog(2,"ERROR, _logview: CreateOptionsMenu can't get reference to Menu"):("#"!==e.charAt(0)&&(e="#"+e),j$(e).html(""),j$(e).append('<li id="'+r+'"><a data-rel="back">'+stringres.get("menu_close")+"</a></li>").listview("refresh"),!0)}catch(o){common.PutToDebugLogException(2,"_logview: CreateOptionsMenu",o)}return!1}function i(e){try{if(common.isNull(e)||e.length<1)return;j$("#logview_menu").on("popupafterclose",function(o){switch(j$("#logview_menu").off("popupafterclose"),e){case r:j$.mobile.back()}})}catch(o){common.PutToDebugLogException(2,"_logview: MenuItemSelected",o)}}function l(e){try{common.PutToDebugLog(4,"EVENT, _logview: onStop"),global.isLogviewStarted=!1,j$("#disable_logs").prop("checked")&&(common.SaveParameter("loglevel","1"),common.SaveParameter("jsscriptevent","2"),webphone_api.setparameter("jsscriptevent","2"),global.loglevel=1,j$("#disable_logs").prop("checked",!1).checkboxradio("refresh")),j$("#log_text").html("")}catch(o){common.PutToDebugLogException(2,"_logview: onStop",o)}}function m(e){}var r="#menuitem_logview_close";return{onCreate:e,onStart:o,onStop:l,onDestroy:m}}();