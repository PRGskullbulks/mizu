wpa._startpage=function(){function t(t){try{common.PutToDebugLog(4,"EVENT, _startpage: onCreate"),j$(window).resize(function(){"page_startpage"===j$.mobile.activePage.attr("id")&&a()}),j$("#startpage_menu_ul").on("click","li",function(t){r(j$(this).attr("id"))}),j$("#btn_startpage_menu").on("click",function(){n("#startpage_menu_ul")}),j$("#btn_startpage_menu").attr("title",stringres.get("hint_menu")),j$("#startpage_btnback").on("click",function(t){i(),t.preventDefault()}),j$("#btn_sp_decline").on("click",function(){common.PutToDebugLog(5,"EVENT, _startpage: button decline onclick"),i(),common.OpenSettings(!0,15)}),j$("#btn_sp_accept").on("click",function(){try{common.PutToDebugLog(5,"EVENT, _startpage: button accept onclick");var t=common.GetParameterInt("startpage_disp_count",0);t++,common.SaveParameter("startpage_disp_count",t.toString()),i()}catch(e){common.PutToDebugLogException(2,"_startpage: onCreate",e)}})}catch(e){common.PutToDebugLogException(2,"_startpage: onCreate",e)}}function e(t){try{common.PutToDebugLog(4,"EVENT, _startpage: onStart"),global.isStartpageStarted=!0,j$("#page_startpage_content").html(""),c=common.GetIntentParam(global.intentstartpage,"url"),m=common.GetIntentParam(global.intentstartpage,"lastpage"),s=common.GetIntentParam(global.intentstartpage,"title"),p=common.GetIntentParam(global.intentstartpage,"text");var e=common.GetIntentParam(global.intentstartpage,"type");if(!common.isNull(e)&&common.IsNumber(e)&&(l=common.StrToInt(e)),common.isNull(document.getElementById("startpage_title"))||(common.isNull(s)&&(s=""),document.getElementById("startpage_title").innerHTML=s),j$("#startpage_title").attr("title",stringres.get("hint_page")),common.isNull(document.getElementById("startpage_btnback"))||(document.getElementById("startpage_btnback").innerHTML="<b>&LT;</b>&nbsp;"+stringres.get("go_back_btn_txt")),a(),m=common.isNull(m)?"":common.Trim(m),j$("#page_startpage").css("background","#FFFFFF"),2===l?(j$("#btn_sp_accept").attr("title",stringres.get("btn_ok")),j$("#btn_sp_decline").hide(),j$("#startpage_btnback").show()):1===l?(j$("#btn_sp_accept").attr("title",stringres.get("btn_accept")),j$("#btn_sp_decline").attr("title",stringres.get("btn_decline")),j$("#btn_sp_decline").show(),j$("#startpage_btnback").hide()):(j$("#btn_sp_accept").attr("title",stringres.get("btn_ok")),j$("#btn_sp_decline").hide(),j$("#startpage_btnback").show()),p.length>5)return void j$("#page_startpage_content").html('<div style="text-align: left; margin: .5em;">'+p+"</div>");!common.isNull(c)&&c.length>0&&o()}catch(n){common.PutToDebugLogException(2,"_startpage: onStart",n)}}function a(){try{j$("#page_startpage").css("min-height","auto"),j$(".separator_line_thick").css("background-color",common.HoverCalc(common.getBgColor("#page_startpage"),-30));var t=common.GetDeviceHeight()-j$("#startpage_header").height()-j$("#startpage_footer").height()-j$(".separator_line_thick").height()-2;t-=3,t=Math.floor(t),j$("#page_startpage_content").height(t),j$("#iframe_startpage").width(common.GetDeviceWidth()),j$("#iframe_startpage").height(t-5)}catch(e){common.PutToDebugLogException(2,"_startpage: MeasureStartpage",e)}}function o(){try{if(common.isNull(c)||c.length<3)return void common.PutToDebugLog(3,"ERROR, _startpage no url to load: "+c);var t=common.GetDeviceWidth(),e=Math.floor(j$("#page_startpage_content").height()-5),a="",o=c.indexOf("[POST]");if(o>0){var n=common.Trim(c.substring(0,o)),r=common.Trim(c.substring(o+6)),i=[],g="";!common.isNull(r)&&r.length>0&&(i=r.split("&"),common.isNull(i)&&(i=[]));for(var m=0;m<i.length;m++)if(!(common.isNull(i[m])||i[m].length<2||i[m].indexOf("=")<1)){var s=i[m].substring(0,i[m].indexOf("=")),p=i[m].substring(i[m].indexOf("=")+1);common.isNull(s)||s.length<1||common.isNull(p)||(g+='<input type="hidden" name="'+s+'" value="'+p+'"/>')}a='<form id="internalb_post" target="iframe_startpage" method="post" action="'+n+'">'+g+'</form><iframe allow="microphone; camera" frameborder="0" width="'+t+'" height="'+e+'" name="iframe_startpage" id="iframe_startpage" style="margin:0px; padding:0px;" sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation"></iframe><script type="text/javascript">document.getElementById("internalb_post").submit();<\/script>'}else a='<iframe style="margin:0px; padding:0px; overflow-x: hidden; overflow-y: auto;" allow="microphone; camera" frameborder="0" width="'+t+'" height="'+e+'" src="'+c+'" name="iframe_startpage" id="iframe_startpage" sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation"></iframe>';j$("#page_startpage_content").html(a)}catch(l){common.PutToDebugLogException(2,"_startpage: OpenWebpage",l)}}function n(t){try{return common.GetParameter("devicetype")===common.DEVICE_WIN_SOFTPHONE()&&j$("#btn_startpage_menu").removeAttr("data-transition"),common.isNull(t)||t.lenght<1?void common.PutToDebugLog(2,"ERROR, _startpage: CreateOptionsMenu menuid null"):j$(t).length<=0?void common.PutToDebugLog(2,"ERROR, _startpage: CreateOptionsMenu can't get reference to Menu"):("#"!==t.charAt(0)&&(t="#"+t),j$(t).html(""),j$(t).append('<li id="'+u+'"><a data-rel="back">'+stringres.get("menu_close")+"</a></li>").listview("refresh"),!0)}catch(e){common.PutToDebugLogException(2,"_startpage: CreateOptionsMenu",e)}return!1}function r(t){try{if(common.isNull(t)||t.length<1)return;j$("#startpage_menu").on("popupafterclose",function(e){switch(j$("#startpage_menu").off("popupafterclose"),t){case u:i()}})}catch(e){common.PutToDebugLogException(2,"_startpage: MenuItemSelected",e)}}function i(){try{m.length<2?(j$.mobile.back(),common.PutToDebugLog(5,"EVENT, _startpage: ClosePage back")):(j$.mobile.changePage("#"+m,{transition:"pop",role:"page"}),common.PutToDebugLog(5,"EVENT, _startpage: ClosePage changepage: "+m))}catch(t){common.PutToDebugLogException(2,"_startpage: ClosePage",t)}}function g(t){try{common.PutToDebugLog(4,"EVENT, _startpage: onStop"),global.isStartpageStarted=!1,j$("#page_startpage_content").html("")}catch(e){common.PutToDebugLogException(2,"_startpage: onStop",e)}}var c="",m="",s="",p="",l=0,u="#menuitem_startpage_close";return{onCreate:t,onStart:e,onStop:g}}();